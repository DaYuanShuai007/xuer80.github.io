<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Activity生命周期与启动模式 | Xuer80</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="四大组件" />
    
    <meta name="description" content="Activity是四大组件中应用最频繁的一种组件，可翻译为活动或者界面，除了Activity之外，其他的界面还有Window，Dialog和Toast。 ##一、Activity生命周期分析## Activity生命周期可以分两部分分析，一部分是典型或一般情况下的生命周期，即有用户参与情况下，其所经过的生命周期的改变；另一种是异常情况下的生命周期，即Activity被系统回收或由于当前设备的Co">
<meta name="keywords" content="四大组件">
<meta property="og:type" content="article">
<meta property="og:title" content="Activity生命周期与启动模式">
<meta property="og:url" content="http://xuer80.com/2018/04/27/Activity生命周期与启动模式/index.html">
<meta property="og:site_name" content="Xuer80">
<meta property="og:description" content="Activity是四大组件中应用最频繁的一种组件，可翻译为活动或者界面，除了Activity之外，其他的界面还有Window，Dialog和Toast。 ##一、Activity生命周期分析## Activity生命周期可以分两部分分析，一部分是典型或一般情况下的生命周期，即有用户参与情况下，其所经过的生命周期的改变；另一种是异常情况下的生命周期，即Activity被系统回收或由于当前设备的Co">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://p05pz65vj.bkt.clouddn.com/Activity%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%BE.png">
<meta property="og:updated_time" content="2018-05-08T12:14:42.226Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Activity生命周期与启动模式">
<meta name="twitter:description" content="Activity是四大组件中应用最频繁的一种组件，可翻译为活动或者界面，除了Activity之外，其他的界面还有Window，Dialog和Toast。 ##一、Activity生命周期分析## Activity生命周期可以分两部分分析，一部分是典型或一般情况下的生命周期，即有用户参与情况下，其所经过的生命周期的改变；另一种是异常情况下的生命周期，即Activity被系统回收或由于当前设备的Co">
<meta name="twitter:image" content="http://p05pz65vj.bkt.clouddn.com/Activity%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%BE.png">
    

    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
        <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?5afbe52ffe1cab6bf0db3773c7af2e11";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
    


</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">大道无为</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">主页</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Android/">Android</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Android/Android应用层/">Android应用层</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/Android/Android框架层/">Android框架层</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/屠龙技/">屠龙技</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/屠龙技/数据结构与算法/">数据结构与算法</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/屠龙技/设计模式/">设计模式</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/开发工具/">开发工具</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/开发工具/AndroidStudio/">AndroidStudio</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/开发工具/Git/">Git</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/操作系统/">操作系统</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/操作系统/Linux/">Linux</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/散文/">散文</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/编程语言/">编程语言</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/编程语言/C/">C</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/编程语言/Java/">Java</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/编程语言/Kotlin/">Kotlin</a></li></ul></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html">关于</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/booklist/index.html">书单</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><input type="hidden" name="sitesearch" value="http://xuer80.com"></form>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/Android/">Android</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/Android/Android应用层/">Android应用层</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/Android/Android应用层/Android四大组件/">Android四大组件</a>
    </h1>
</div>
                        <div class="main-body-content">
                            <article id="post-Activity生命周期与启动模式" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        Activity生命周期与启动模式
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2018/04/27/Activity生命周期与启动模式/" class="article-date">
            <time datetime="2018-04-27T00:59:19.000Z" itemprop="datePublished">2018-04-27</time>
        </a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/四大组件/">四大组件</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <p> Activity是四大组件中应用最频繁的一种组件，可翻译为活动或者界面，除了Activity之外，其他的界面还有Window，Dialog和Toast。</p>
<p>##一、Activity生命周期分析##</p>
<p>Activity生命周期可以分两部分分析，一部分是典型或一般情况下的生命周期，即有用户参与情况下，其所经过的生命周期的改变；另一种是异常情况下的生命周期，即Activity被系统回收或由于当前设备的Configuration发生改变从而导致Activity被销毁重建。二者略有不同</p>
<p><strong>典型情况下的生命周期分析</strong></p>
<p>正常情况下，Activity会经历如下生命周期</p>
<ol>
<li><p>onCreate:表明Acitivity正在被创建，是生命周期的第一个方法。此方法会做一些初始化工作，如调用setContentview去加载界面布局资源、绑定事件、初始化视图、初始化Activity所需数据等</p>
</li>
<li><p>onRestart:表明Activity正在重新启动。一般当Activity从不可见重新变为可见状态时，onRestart就会被调用。这种情况发生在用户home键切换桌面或其他新的Activity，此时当前的Activity就会暂停，也就是onPause和onStop被执行了，接着用户又返回这个Activity，就会出现这种情况</p>
</li>
<li><p>onStart:此时Activity正被启动，即将开始，而Activity已经可见了，但并没出现再前台，无法交互。可理解为Activity已经显示出来，或者做好了准备，但看不到</p>
</li>
<li><p>onResume:Activity可见，并出现再前台并开始活动做交互。这个和onStart对比，随Activity都可以见，但onStart时Activity还在后台，onResume时才显式到前台。此时活动一定位于栈顶，并处于运行状态。 </p>
</li>
<li><p>onPause:表明界面正在停止，一般紧接着onStop会被调用。特殊情况下，如果此时再次快速回到当前Activity，那么onResume会被调用。此时可以做一些存储数据、停止动画等工作，但不能太耗时，因为会影响到新的Activity的显式。onPause必须先执行完，新的Activity的onResume才会执行。此时Activity可见，但不能交互。</p>
</li>
<li><p>onStop:即Activity即将停止，可做一些稍微重量级的回收工作，同样不能太耗时。此时Activity已不可见</p>
</li>
<li><p>onDestroy:表示Activity即将销毁，是其生命周期最后一个回调，在此可做一些回收工作和最终的资源释放。</p>
<p>正常情况下，Activity的常用生命周期就只有如上7个，下图可见</p>
<p><img src="http://p05pz65vj.bkt.clouddn.com/Activity%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%9B%BE.png" alt=""></p>
<p>​    针对该图，可知以下情况</p>
<ul>
<li>针对一个特定Activity，第一次启动回调oncreate-&gt;onStart-&gt;onResume</li>
<li>当用户打开新的Activity或切换到桌面的时候，回调如下：onPause-&gt;onStop。有一种特殊情况，那就是新的界面(Dialog，window)或Activity采用透明主题，那么当前Activity不会回调onStop</li>
<li>当再次回到原Activity时，回调如下：onRestart-&gt;onStart-&gt;onResume。</li>
<li>当用户按back键回退时，回调如下：onPause-&gt;onStop-&gt;onDestroy。</li>
<li>当Activity被系统回收后，再次打开时，生命周期方法回调会重新走一遍oncreate-&gt;onStart-&gt;onResume，但只是生命周期方法一样，过程不一定相同</li>
<li>从整个生命周期来看，onCreate和onDestroy分别代表创建和销毁，只能有一次调用；从是否可见而言，onStart和onStop是配对的，随用户的操作或设备屏幕的点亮和熄灭，这两个方法会被调用多次；从Activity是否再前台分析，onResume和onPause是配对的，随用户的操作或设备屏幕的点亮和熄灭，这两个方法会被调用多次。</li>
</ul>
<blockquote>
<p>onStart和onResume、onPause和onStop描述上差不多，实际差别怎样？</p>
</blockquote>
<p>​    这两个配对的回调代表不同意义，onStart和onStop是从Activity是否可见这个角度来回调的，而onResume和onPause是从Activity是否位于前台这个角度回调的。除此之外没有其他明显区别</p>
<blockquote>
<p>设当前界面为A，如果打开新的界面B，那么B和A的onResume哪个先执行呢？</p>
</blockquote>
<p>​    Activity的启动过程很复杂，设计instrumentation、ActivityThread和ActivityManagerService(AMS)。简单理解，启动Activity请求会由Instrumentation来处理，然后通过Binder向AMS发请求，AMS内部维护着一个ActivityStack并负责栈内的Activity状态同步，AMS通过ActivityThread去同步Activity的状态从而完成生命周期方法的调用。</p>
<p>​    在ActivityStack栈中，在新Activity启动之前，栈顶的Activity需要先onPause后，新的Activity才能启动。源码也会调用ActivityThread的子类ApplicationThread的scheduleLaunchActivity方法，该方法最终会完成新的onCreate、onStart、onResume的调用过程。因此可知，是旧Activity先onPause，然后新的Activity再启动。</p>
</li>
</ol>
<p><strong>异常情况下生命周期分析</strong></p>
<p>​    Activity除了正常操作所导致的生命周期方法调度外，还有因为其他异常情况，如资源配置或内存不足时生命周期的变化</p>
<ol>
<li><p>情形1：资源相关的系统配置发生改变导致Activity被杀死并重新创建</p>
<p>简单说一下系统的资源加载机制，以图片为例，我们把图片放到drawable目录后，可通过Resources去获取这张图片，同时为了兼容不同的设备，可能还需要再drawable-mdpi\hdpi\land等目录放不同的图片。这样，系统会根据当前设备的情况去加载合适的Resource资源，如横竖屏会拿到两张不同的照片(设定了landscape或portrait状态下图片)，而横竖屏切换，由于系统配置改变，也会导致Activity销毁并重建。</p>
<p>​    当系统配置发生改变后，Activity会被销毁，其onPause、onStop和onDestroy均会被调用，同时由于Activity是在异常情况下终止的，系统会调用onSaveInstanceState来保存当前Activity的状态。该方法调用时机是在onstop之前，和onPause没有既定的时序关系，既可能再onPause之前也可能在其之后调用。当Activity被重建后，会调用onRestoreInstanceState，并把界面销毁时onSaveInstanceState保存的Bundle对象作为参数同时传递给onRestoreInstanceState和onCreate方法。从时序上看，onRestoreInstanceState的调用时机在onStart之后。</p>
<p>​    其实，在onSaveInstanceState和onRestoreInstanceState方法中，系统自动做了一些恢复工作，当界面重建时，系统默认保存当前Activity的视图结构，并在Activity重启后恢复这些数据，如文本框输入的数据、ListView滚动的位置，View的相关状态系统都能默认恢复。其实每一个View都有这两个方法。因为到Activity被意外终止时，Activity会调用onSaveInstanceState保存数据，然后Activity委托Window保存数据，接着Window再委托其上层顶级容器保存数据。顶层容器是一个ViewGroup，一般很可能是DecorView。顶层容器再一一通知其子元素保存数据，这样整个数据保存过程就完成了。数据恢复也类似，不再赘述。</p>
<p>​    以屏幕旋转为例分析，当Activity被意外终止并重建时，我们获取之前存储的信息，可以再onCreate或onRestoreInstanceState位置，区别就是后者一旦被调用参数肯定不为空，但onCreate不行，其正常启动，参数为空，异常重建启动则不为空，需要判断。官方建议后者。但保存和恢复实例状态这两个方法都只再Activity异常终止时才会调用。</p>
<p>​    横竖屏切换时，界面的生命周期onPause-&gt;onSaveInstanceState-&gt;onStop-&gt;onCreate-&gt;onStart-&gt;onRestroeInstanceState。</p>
</li>
<li><p>情形2： 资源内存不足导致低优先级的Activity被杀死</p>
<p>Activity优先级从高到底如下</p>
<ul>
<li><p>前台Activity，即正在和用户交互的Activity优先级最高</p>
</li>
<li><p>可见但非前台Activity，如Activity弹出dialog或Toast等对话框，导致其可见但无法交互</p>
</li>
<li><p>后台Activity，已被暂停的Activity，比如执行了onStop,优先级最低</p>
<p>​    当系统内存不足时，系统会按照上述优先级去杀死目标Activity所在的进程，并在后续通过onSaveInstanceState和onRestoreInstanceState来存储和恢复数据。如果一个进程没有四大组件在执行，那么这个进程将很快被系统杀死，因此，一些后台工作不适合脱离组件而独自运行在后台中，比较好的方法是将后台工作放在Service中从而保证进程有一定的优先级，这样不易被系统杀死。</p>
<p>​    </p>
<p>上述分析了系统的数据存储和恢复机制，而且当系统配置改变时，activity会被重新创建。如何不重新创建呢？系统配置有很多内容，可以给Activity指定configChanges属性，如不想屏幕旋转时重新创建，可给configChanges属性添加orientation值，如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android:configChanges=&quot;orientation&quot;</span><br></pre></td></tr></table></figure>
<p>如想指定多个值，可用“|”连接起来，如android:configChanges = “orientation|keyboardHidden”；系统配置所含参数和项目比较多，如下</p>
<p>| 项目               | 含义                                                         |<br>| —————— | ———————————————————— |<br>| mcc                | SIM卡唯一标识IMSI（国际移动用户识别码）中的国家代码，有三位数字组成，中国为460。此项识别mcc代码发生改变。 |<br>| mnc                | SIM卡唯一标识IMSI（国际移动用户标识码）中的运营商代码，有两位数字组成，中国移动TD系统为00，中国联通为01，中国电信为03。此标识mnc发生改变。 |<br>| locale             | 设备的本地位置发生改变，一般只切换了系统语言。               |<br>| touchscreen        | 触摸屏发生了改变，这个很费解，正常情况下无法发生，可以忽略它。 |<br>| keyboard           | 键盘类型发生了改变，比如用户使用了外插键盘。                 |<br>| keyboardHidden     | 键盘的可访问性发生了变化，比如用户调出了键盘。               |<br>| navigation         | 系统导航方式发生了改变，比如用户采用了轨迹球导航，这个有点费解，很难发生，可以忽略它。 |<br>| screenLayout       | 屏幕布局发生了改变，很可能是用户激活了另一个设备显示。       |<br>| fontScale          | 系统字体缩放比例发生了改变，比如用户使用了一个新字号。       |<br>| uiMode             | 用户界面模式发生了改变，比如是否开启了夜间模式。             |<br>| orientation        | 屏幕方向发生了改变，这个是最常用的，比如旋转了手机屏幕。     |<br>| screenSize         | 当屏幕的尺寸信息发生了改变，当旋转设备屏幕时，屏幕尺寸会发生变化，这个选项比较特殊，它和编译选项有关，当编译选项中的minSdkVersion和targetSdkVersion低于13时，此选项不会导致Activity重启，否则会导致Activity重启（API13新添加）。 |<br>| smallwstScreenSize | 设备的物理屏幕尺寸发生改变，这个项目和屏幕方向没关系，仅仅表示在实际的物理屏幕的尺寸改变的时候发生，比如用户切换到了外部的显示设备，这个选项和screenSize一样，当编译选项中的minSdkVersion和targetSdkVersion低于13时，此选项不会导致Activity重启，都则会导致Activity重启（API13新添加）。 |<br>| layoutDirection    | 当布局发生变化，这个属性用的比较少，正常情况下无需修改布局的layoutDirection属性（API17新添加） |</p>
</li>
</ul>
<p>由表可知，如没再Activity的configChanges属性指定该选项的话，当配置发生改变就会导致Activity重新创建。表中项目虽多，但重用只有locale、orientation和keyboardHidden三个选项，其余很少用。需注意的是screenSize和smallestScreenSize，它们的行为和编译选项有关(build.gradle的设置)，和运行环境无关。</p>
<p>当设置android：configChanges=”orientation|screenSize”时</p>
<p>如果targetSdkVersion或minSdkVersion有一个大于13,所以为了防止旋转屏幕时Activity重启，还要加上screenSize，这样可以保证即使都大于13也不会重启了。</p>
<p>​    实际运行中，Activity也没有重建，也没有调用保存和恢复数据方法，取而代之的是系统调用了Activity的onConfigurationChanged方法，在这个方法里我们可以做一些自己特殊的处理，比如判断屏幕横竖屏，进而做出不同的适配等。</p>
</li>
</ol>
<p>##二、Activity的启动模式##</p>
<p>​    除了界面的生命周期，其启动模式和标志位极易混淆，再次将一一介绍</p>
<p><strong>Android任务栈简介</strong></p>
<p>一个Android程序通常包含多个Activity，之间通过Intent进行连接，系统通过栈结构保存整个应用的Activity，一个合理的任务调度栈可以保证性能。一个Task中的Acitivity可以来自不同的App，同一个App的Activity也可能不再一个Task中。栈结构是一个后进先出的线性表。</p>
<p><strong>Activity的LaunchMode</strong></p>
<p>为何需要启动模式launchMode？默认情况下，我们多次启动同一个Activity时，系统会创建多个实例，并把它们一一放入任务栈中，当我们单击back键时，会发现这些Activity会一一回退。任务栈是一种“后进先出”的栈结构，当栈中无任何Activity时，系统就会回收这个任务栈。为避免多个实例的情况，可用四种启动模式：standard、singleTop、singleTask和singleInstance</p>
<ol>
<li><p>Standard：标准模式，也是系统的默认模式。每次启动一个Activity都会重新创建一个新的实例，不管这个实例是否已经存在，每个实例都符合典型Activity的生命周期运行。这是典型的多实例实现，一个任务栈可有多个实例，每个实例也可以属于不同的任务栈。这种模式下，谁启动了这个Activity，那么这个Activity就运行在启动它的那个Activity所在的栈中。如AcitivityA启动了ActivityB，那么B就会进入A所在的栈中。而如果用ApplicationContext启动standard模式的Activity就会报错，因为Context并没有任务栈。可以指定FLAG_ACTIVITY_NEW_TASK标记位，这样在启动时会创建一个新的任务栈，实际上是以singleTask模式启动</p>
</li>
<li><p>singleTop：栈顶复用模式。此模式，如新的Activity位于栈顶，则此Activity便不会被重复创建，同时它的onNewIntent方法会被回调，通过此方法的参数可取出当前请求的信息。而且这个Activity的onCreate、onStart不会被系统调用，因为它并没改变。需要注意的是如果Activity实例已存在但不位于栈顶，那么新的Activity仍然会重建。</p>
</li>
<li><p>singleTask：栈内复用模式。这是单实例模式，此模式下，只要Activity在栈中存在，那么重复启动此Activity将不会重新创建实例，和singleTop一样，系统也会回到onNewIntent，并把此Activity从栈中调到栈顶。</p>
<ul>
<li>如任务栈S1内有ABC界面，新的D界面以singleTask模式启动，其所需任务栈为S2,那么系统会先创建S2任务栈，再创建D的实例入栈S2</li>
<li>如上，D界面所需任务栈为S1的话，那么就会直接把D的实例加入到S1</li>
<li>如D界面所需任务栈为S1，内部界面为ADBC，那么新建D实例的话，会导致栈内所有再D界面上的Activity实例出栈，最终S1会剩下AD，因为singleTask默认具有clearTop效果</li>
</ul>
</li>
<li><p>singleInstance:单实例模式，其具有singleTask模式所有的特性，还有具备此模式的Activity只能单独位于一个任务栈中，之后由于栈内复用的特性，后续均不会再创建新的Activity，除非这个独特的任务栈被系统销毁。此模式可用于共享活动实例的情况，这样不同程序可以共享该模式下的活动，又不影响正运行的返回栈的操作情况。</p>
<p>​    Activity所需的任务栈，默认情况，一般指以应用包名命名的任务栈。当然我们可以为每个Activity单独指定其任务栈，TaskAffinity任务相关性，该参数标识了Activity所需任务栈的名字。TaskAffinity属性主要和singleTask模式或allowTaskReparenting属性配对使用，否则无意义。任务栈分为前台任务栈和后台任务栈，后台任务栈中的Activity处于暂停状态，可通过切换将后台任务栈调到前台。</p>
<ul>
<li>TaskAffinity和singleTask配对使用时，其具有该模式下Activity的当前任务栈的名字，待启动的Activity会运行在名字和TaskAffinity相同的任务栈中</li>
<li>TaskAffinity和allowTaskReparenting结合时，较复杂。当应用A启动yingyongB的某个Activity时，这个Activity的allowTaskReparenting属性为true的话，那么当应用B被启动后，此Activity会直接从应用A的任务栈转移到B的任务栈中。</li>
</ul>
<p>如何给Activity指定启动模式呢？一、通过清单指定其launchMode；二、代码中通过Intent设置标志位来指定。此二者，后者优先级较高，一二同时存在，以后者为准。</p>
<p><strong>清空任务栈</strong></p>
<p>可在清单的属性中配置</p>
<ul>
<li><p>clearTaskOnLaunch</p>
<p>即每次返回该Activity时，都将该Activity之上的所有Activity清除。通过此属性，可在每次Task初始化时，都只有一个Activity。</p>
</li>
<li><p>finishOnTaskLaunch</p>
<p>与前者类似，不过前者作用于其他Activity，这里作用于自己。即离开当前Activity所处Task，那么该Activity就会被finish掉</p>
</li>
<li><p>alwaysRetainTaskState</p>
<p>如将此设为true，那么该Activity所在Task将不接受任何清理命令，一直保持当前Task状态。</p>
</li>
</ul>
</li>
</ol>
<p><strong>Activity的Flags参数</strong></p>
<p>​    Activity的Flags很多，这里分析常用的。标记位作用也很多，有些可以设定Activity的启动模式，如FLAG_ACTIVITY_SINGLE_TOP等；还有些可以影响Activity的运行状态，如FLAG_ACTIVITY_CLEAR_TOP等。一般我们不需要特别指出Activity标记位，因为有些标记位是系统内部使用的，尽量不要手动改动。</p>
<ol>
<li><p>FLAG_ACTIVITY_NEW_TASK</p>
<p>该标记位的作用是为Activity指定singleTask启动模式，和清单中指定效果相同。该flag通常用在从Service中启动Activity的场景，因为Service不存在Activity栈。</p>
</li>
<li><p>FLAG_ACTIVITY_SINGLE_TOP</p>
<p>该标记位的作用是为Activity指定singleTop启动模式，和清单中指定效果相同</p>
</li>
<li><p>FLAG_ACTIVITY_CLEAR_TOP</p>
<p>具有此标记位的Activity，启动时，其所在任务栈的位于其上的所有Activity都要出栈。一般需要和FLAG_ACTIVITY_NEW_TASK配合使用，这种情况下，如被启动的Activity实例已存在，那么系统会调用他的onNewIntent。如被启动的Activity采用standard模式，那么它连同之上的Activity都要出栈，系统会创建新的Activity实例并放入栈顶。singTask模式默认具有此标记位的效果</p>
</li>
<li><p>FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS</p>
<p>具备此标记的Activity不会出现在历史Activity的列表中，当某些情况下，我们不希望用户通过历史列表回到我们的Activity的时候此标记比较有用。其效果等同清单中指定Activity属性android:excludeFromRecents=”true”、</p>
</li>
<li><p>FLAG_ACTIVITY_NO_HISTORY</p>
<p>当前Activity启动其他Acrtivity后，该Activity消失，不会保留栈中。</p>
</li>
</ol>
<h2 id="三、IntentFilter的匹配规则"><a href="#三、IntentFilter的匹配规则" class="headerlink" title="三、IntentFilter的匹配规则"></a>三、IntentFilter的匹配规则</h2><p>​    启动Activity分两种形式，显式调用和隐式调用。显示调用需要明确指定被启动对象的组件信息，包括包名和类名；隐式调用则不需要明确指定组件信息。原则上一个Intent不应该即是显式调用又是隐式调用，如二者共存以显式调用为主。隐式调用需要Intent能够匹配目标组件的IntentFilter中所设置的过滤信息，如果不匹配将无法启动目标Activity。IntentFilter中过滤的信息有action、category、data等。每个Intent只能指定一个action，但可以有多个category.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;application</span><br><span class="line">        android:allowBackup=<span class="string">"true"</span></span><br><span class="line">        android:icon=<span class="string">"@mipmap/ic_launcher"</span></span><br><span class="line">        android:label=<span class="string">"@string/app_name"</span></span><br><span class="line">        android:roundIcon=<span class="string">"@mipmap/ic_launcher_round"</span></span><br><span class="line">        android:supportsRtl=<span class="string">"true"</span></span><br><span class="line">        android:theme=<span class="string">"@style/AppTheme"</span>&gt;</span><br><span class="line">        &lt;activity android:name=<span class="string">".MainActivity"</span>&gt;</span><br><span class="line">            &lt;intent-filter&gt;</span><br><span class="line">                &lt;action android:name=<span class="string">"android.intent.action.MAIN"</span> /&gt;</span><br><span class="line">                &lt;action android:name=<span class="string">"android.intent.action.ALL_APPS"</span> /&gt;</span><br><span class="line">                &lt;category android:name=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</span><br><span class="line">                &lt;category android:name=<span class="string">"android.intent.category.ALTERNATIVE"</span> /&gt;</span><br><span class="line">                &lt;data android:mimeType="@string/app_name"&gt;&lt;/data&gt;</span><br><span class="line">            &lt;/intent-filter&gt;</span><br><span class="line">        &lt;/activity&gt;</span><br><span class="line">    &lt;/application&gt;</span><br></pre></td></tr></table></figure>
<p>​    为了匹配过滤列表，需要同时匹配过滤列表中的action、category、data信息，否则匹配失败。所有的action、category、data分别构成不同类别，同一类型的信息共同约束当前类型的匹配过程。只有Intent与这三个类别同时匹配，才能成功启动目标Activity。而且一个Activity可以又多个intent-filter，一个Intent只要能匹配其中一组即可</p>
<ol>
<li><p>action的匹配规则</p>
<p>action是一个字符串，系统预定义一些，自己也可以自定义。action的匹配规则是Intent中的action 必须能够和过滤规则中的action匹配，这里说的匹配是字符串值一样。一个过滤规则可有多个action，只要Intent的action能匹配清单其中一个即匹配成功。如示例，只要我们的Intent的action值为”android.intent.action.MAIN”或”android.intent.action.ALL_APPS”都能匹配成功。如Intent没有指定action，那么匹配失败。而且action区分大小写，大小写不同字符串也会匹配失败。</p>
</li>
<li><p>category匹配规则</p>
<p>category也是既有系统预定义也可自定义的字符串。其匹配规则和action不同，其要求如果Intent如果含有category，那么所有的category必须和过滤规则中其中一个category相同。即Intent不管定义了多少个category，都必须在过滤规则中得到匹配。如果Intent没有category，那么仍然可以匹配成功。其和action不同之处在于，action要求Intent必须有一个action，且能够和过滤规则中的某个action匹配，而category可以在Intent中不存在，但一旦存在category，每个都要能够和过滤规则中的任何一个category相同。为了匹配前面所说过滤规则的category，Intent可写intent.addcategory(“android.intent.category.c”)或不设置category。为何不设置也可匹配，因为系统在调用startActivity或startActivityForResult时会默认为intent加上”android.intent.category.DEFAULT”这个category，这个可以匹配过滤规则中给出的category。</p>
</li>
<li><p>data的匹配规则</p>
<p>data的匹配规则和action类似，如果过滤规则中定义了data，那么Intent中必须也要定义可匹配的data。data本身的结构较复杂，稍微介绍下</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;data android:mimeType=<span class="string">"string"</span></span><br><span class="line">                    android:host=<span class="string">"string"</span></span><br><span class="line">                    android:path=<span class="string">"string"</span></span><br><span class="line">                    android:pathPattern=<span class="string">"string"</span></span><br><span class="line">                    android:pathPrefix=<span class="string">"string"</span></span><br><span class="line">                    android:port=<span class="string">"string"</span></span><br><span class="line">                    android:scheme=<span class="string">"string"</span></span><br><span class="line">                    android:ssp=<span class="string">"string"</span></span><br><span class="line">                    android:sspPattern=<span class="string">"string"</span></span><br><span class="line">                    android:sspPrefix=<span class="string">"string"</span></span><br><span class="line">                    &gt;&lt;/data&gt;</span><br></pre></td></tr></table></figure>
<p>data由两部分组成mimeType和URI。mimeType指媒体类型，如image/jpeg、audio/mpeg4-generic和video/*等，可以表示图片、文本、视频等不同的媒体格式，而URI中包含的数据较多，一般URI的结构如下：</p>
<p><scheme>://<host>:<port>/[<path></path>|<pathprefix>|<pathpattern>]</pathpattern></pathprefix></port></host></scheme></p>
<p>举个例子</p>
<p><a href="http://www.baidu.com:80/search/info这样就很容易理解了" target="_blank" rel="noopener">http://www.baidu.com:80/search/info这样就很容易理解了</a></p>
<p>​    Scheme:URI的模式，用来指定数据的协议部分，如http、file、content、tel等，如URI没指定scheme，那整个URI的其他参数都将无效，当然URI也无效</p>
<p>​    Host:URI的主机名，如<a href="http://www.baidu.com，如host未指定，那么URI的其他参数无效，即URI亦无效" target="_blank" rel="noopener">www.baidu.com，如host未指定，那么URI的其他参数无效，即URI亦无效</a></p>
<p>​    Port:URI中的端口号，如80，仅当URI中指定了scheme和host参数的时候port参数才有效</p>
<p>​    Path、pathPattern和pathPrefix:这三个参数表示路径信息，其中path表示完整的路径信息；pathPattern也表示完整路径信息，但里面可以报哈哈你通配符“<em>”，其表示0个或多个任意字符。当然由于正则表达式的规范，如果想表达真实的字符串，那么通配符应写成“\</em>”， “\”要写成“\ \ \ \”；pathPrefix表示路径的前缀信息。</p>
<p>​    data匹配要求Intent必须含有data数据，并且data数据能完全匹配过滤规则中的某一个data。这里完全匹配的意思就是过滤规则中出现的data部分也出现在了Intent中的data中。</p>
<p>如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;intent-filter&gt;</span><br><span class="line">&lt;data android:mimeType=<span class="string">"image/*"</span>/&gt;</span><br><span class="line">...</span><br><span class="line">&lt;intent-filter&gt;</span><br></pre></td></tr></table></figure>
<p>​    此规则指定媒体类型为所有类型的图片，那么Intent中的mimeType属性必须为image/*才能匹配，这种情况过滤规则中虽未知道URI，但却有默认值，URI的默认值为content和file。也就是说过滤规则中虽未指定URI，但Intent中的URI部分的schema必须为content或file才能匹配。</p>
<p>可用以下规则匹配</p>
<p>intent.setDataAndType(Uri.parse(“file://abc”)，”image/png”)</p>
<p>如上，要为intent指定完整的data,必须调用setDataAndType方法，不能先调用setData然后setType，因为这两个方法彼此会清除对方的值</p>
<p>如下规则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;intent-filter&gt;</span><br><span class="line">&lt;data android:mimeType=&quot;video/mpeg&quot; android:scheme=&quot;http&quot;..../&gt;</span><br><span class="line">&lt;data android:mimeType=&quot;audio/mpeg&quot; android:scheme=&quot;http&quot;..../&gt;</span><br><span class="line">...</span><br><span class="line">&lt;intent-filter&gt;</span><br></pre></td></tr></table></figure>
<p>此规则指定两组data规则，且每个data都指定了完整的属性，既有URI又有mimeType，为匹配上述规则，可有下示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">intent.setDataAndType(Uri.parse(&quot;http://abc&quot;),&quot;video/mpeg&quot;)</span><br><span class="line">或</span><br><span class="line">intent。setDataAndType(Uri.parse(&quot;http://abc&quot;),&quot;audio/mpeg&quot;)</span><br></pre></td></tr></table></figure>
<p>data的有些特殊写法，如下，作用一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;intent-filter&gt;</span><br><span class="line">&lt;data android:scheme=&quot;file&quot; android:host=&quot;www.baidu.com&quot;/&gt;</span><br><span class="line">...</span><br><span class="line">&lt;intent-filter&gt;</span><br><span class="line"></span><br><span class="line">&lt;intent-filter&gt;</span><br><span class="line">&lt;data android:scheme=&quot;file&quot; /&gt;</span><br><span class="line">&lt;data android:host=&quot;www.baidu.com&quot;/&gt;</span><br><span class="line">...</span><br><span class="line">&lt;intent-filter&gt;</span><br></pre></td></tr></table></figure>
<p>Intent-filter的匹配规则对于service和broadcastReceiver也是同理，不过服务最好显式调用。</p>
<p>​</p>
<p>​    最后，当我们隐式启动一个Activity时，需判断是否有Activity能够匹配我们的Intent，判断方法有两种，采用PackageManager或Intent的resolveActivity方法，它们找不到匹配的Activity就会返回null。前者还提供了queryIntentActivity方法，这个方法和resolveActivity方法不同的是：它不是返回最佳匹配的Activity信息而是返回所有成功匹配的Activity信息。这两个方法的原型如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">public abstract List&lt;ResolveInfo&gt; queryIntentActivityies(Intent intent,int flags);</span><br><span class="line">  public abstract ResolveInfo resloveActivity(Intent intent,int flags);</span><br></pre></td></tr></table></figure>
<p>第二个参数flags使用MATCH_DEFAULT_ONLY，这个标志位仅仅匹配那些在<br>intent-filter中声明了 android.intent.category.DEFAULT 这个category的Activity，只要上述两个方法不返回Null，那么StartAcrtivity一定成功。如不用此标志位，就可以把清单category不含DEFAULT的Activity都匹配出来，从而导致startActivity失败。因为不含DEFAULT这个category的Activity是无法接受隐式Intent的。</p>
<p>​    action和category有两个比较重要</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;</span><br><span class="line"> &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>此二者共同作用表明Activity的入口，并且会出现在系统的应用列表中，缺一不可。另外对于Service和BroadcastReceiver,PackageManager提供类似方法获取匹配信息。</p>
</li>
</ol>
<p>​    </p>

        </div>
        <footer class="article-footer">
            
    <div class="jiathis_style">
    <span class="jiathis_txt">分享到：</span>
    <a class="jiathis_button_qzone">QQ空间</a>
    <a class="jiathis_button_tsina">新浪微博</a>
    <a class="jiathis_button_tqq">腾讯微博</a>
    <a class="jiathis_button_weixin">微信</a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
    <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<style>
    .jiathis_style div:first-child:not(.jiadiv_01) {
        width: auto !important;
        border: none !important;
    }
    .jiathis_style .jiadiv_01 {
        margin: 10px 0;
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .jiathis_style .jiadiv_01 div:first-child {
        display: none;
    }
    .jiathis_style .jiadiv_02 {
        padding: 7px 0 !important;
    }
    .jiathis_style .jiadiv_02 .jiatitle {
        width: 85px;
        border: none;
        height: auto;
        margin: 3px 10px;
        padding: 6px 10px;
        border-radius: 4px;
    }
    .jiathis_style .jiadiv_02 .jiatitle:hover {
        border: none;
    }
    .jiathis_style .jiadiv_02 .jiatitle:nth-child(even) {
        margin-left: 0;
    }
    .jiathis_style .jtico:hover {
        opacity: 1;
    }
    .jiathis_style .ckepopBottom,
    .jiathis_style .centerBottom {
        width: auto !important;
        padding: 5px;
        background: #f7f7f7;
    }
</style>




        </footer>
    </div>
</article>
<!-- 来必力City版安装代码 -->
<div id="lv-container" data-id="city" data-uid="MTAyMC8zMjA1Ni84NjIw">
	<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
<noscript> 为正常使用来必力评论功能请激活JavaScript</noscript>
</div>
<!-- City版安装代码已完成 -->

                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/xuer80" target="_blank">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2018/04/27/第二章-Kotlin习惯用法/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">下一篇</strong>
        <p class="article-nav-title">
        
            第二章-Kotlin习惯用法
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2018/04/27/Android四大组件概述/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">Android四大组件概述</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2018/05/08/Activity启动过程详述/" class="title">Activity启动过程详述</a></p>
                            <p class="item-date"><time datetime="2018-05-08T12:19:54.000Z" itemprop="datePublished">2018-05-08</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Android/">Android</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Android/Android应用层/">Android应用层</a></p>
                            <p class="item-title"><a href="/2018/05/08/Activity实践/" class="title">Activity实践</a></p>
                            <p class="item-date"><time datetime="2018-05-08T10:32:30.000Z" itemprop="datePublished">2018-05-08</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Android/">Android</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/Android/Android应用层/">Android应用层</a></p>
                            <p class="item-title"><a href="/2018/05/08/Activity启动过程概述/" class="title">Activity启动过程概述</a></p>
                            <p class="item-date"><time datetime="2018-05-08T09:44:56.000Z" itemprop="datePublished">2018-05-08</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/编程语言/">编程语言</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/编程语言/Kotlin/">Kotlin</a></p>
                            <p class="item-title"><a href="/2018/05/02/第四章-kotlin基本类型/" class="title">第四章-kotlin基本类型</a></p>
                            <p class="item-date"><time datetime="2018-05-02T14:25:53.000Z" itemprop="datePublished">2018-05-02</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/编程语言/">编程语言</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/编程语言/Kotlin/">Kotlin</a></p>
                            <p class="item-title"><a href="/2018/04/27/第三章-Kotlin编码规范/" class="title">第三章-Kotlin编码规范</a></p>
                            <p class="item-date"><time datetime="2018-04-27T15:21:25.000Z" itemprop="datePublished">2018-04-27</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a><span class="category-list-count">6</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android应用层/">Android应用层</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android应用层/Android四大组件/">Android四大组件</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android应用层/Android架构/">Android架构</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android框架层/">Android框架层</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/Android框架层/Android系统架构/">Android系统架构</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/屠龙技/">屠龙技</a><span class="category-list-count">27</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/屠龙技/数据结构与算法/">数据结构与算法</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/屠龙技/数据结构与算法/数据结构/">数据结构</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/屠龙技/数据结构与算法/算法/">算法</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/屠龙技/设计模式/">设计模式</a><span class="category-list-count">25</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/开发工具/">开发工具</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/开发工具/AndroidStudio/">AndroidStudio</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/开发工具/Git/">Git</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/">操作系统</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/Linux/">Linux</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/操作系统/Linux/linux基础/">linux基础</a><span class="category-list-count">2</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/散文/">散文</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/">编程语言</a><span class="category-list-count">10</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/C/">C</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/C/C-Primer-Plus/">C Primer Plus</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/Java/">Java</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/Kotlin/">Kotlin</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/Kotlin/kotlin基础/">kotlin基础</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程语言/Kotlin/认识Kotlin/">认识Kotlin</a><span class="category-list-count">3</span></li></ul></li></ul></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a><span class="archive-list-count">13</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/AndroidStudio/" style="font-size: 15px;">AndroidStudio</a> <a href="/tags/Android架构/" style="font-size: 12.5px;">Android架构</a> <a href="/tags/C/" style="font-size: 15px;">C</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/kotlin/" style="font-size: 17.5px;">kotlin</a> <a href="/tags/linux/" style="font-size: 12.5px;">linux</a> <a href="/tags/四大组件/" style="font-size: 17.5px;">四大组件</a> <a href="/tags/散文/" style="font-size: 12.5px;">散文</a> <a href="/tags/数据结构/" style="font-size: 12.5px;">数据结构</a> <a href="/tags/设计模式/" style="font-size: 20px;">设计模式</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2018 xuer80</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
        </div>
    </div>
</footer>
        
    
    <script>
    var disqus_shortname = 'hexo-theme-hueman';
    
    
    var disqus_url = 'http://xuer80.com/2018/04/27/Activity生命周期与启动模式/';
    
    (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>




    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
